---
title: ラベルにも副作用がある
layout: default
---

再び、[ACTLab](https://actlab.org/)代表の吹雪です。



### 正しいマークアップと文字でのラベル付けは、視覚障害者への配慮の基本

視覚障害者へのウェブアクセシビリティの話をするとき、img要素で作られた画像にaltタグを正しく付けることと、HTMLのルールをきちんと守ることの２点が真っ先に言われるのではないでしょうか。
これらには絶大な効果がありますし、基本的に副作用はありません。
同時にマシンリーダブルにもなって検索性も高まります。
世のウェブ開発者の皆様に、これだけでもぜひお願いしたいところです。


### 画像以外にもラベリングが必要

ひと昔前までであれば、ここまででもかなりの部分でアクセシビリティの確保ができていました。
しかし、ウェブでの表現が豊かになる中で、img要素以外の方法で描画される非テキストコンテンツが増えてきました。
一例をあげると、下記のようなものです。
これらの表現方法には、alt属性やlabel要素のような標準のラベリング手段が用意されていないという共通点があります。

- アイコンフォント
	- 家マークでトップへ戻る、虫眼鏡マークで検索機能を呼び出すなど
- CSSでのアイコン表示
	- ハンバーガーメニュー程度であれば、div要素などに対してCSSで描画することもできます

下記は、i要素に[font-awesome](https://fontawesome.com/)が提供するCSSを適用することによって描画した検索アイコンの例です。
NVDAでは、・・・



### aria-labelによるラベリング

標準でラベリングのための手段が用意されていない要素にラベリングを行う手段として、aria-labelがあります。
以下は、前節と同じ方法でi要素を用いて作ったアイコンをdivで囲い、そこにaria-labelでラベリングをした例です。


このようにラベリングがなされていれば、NVDAは・・・



### ラベリングの弊害

最初に述べたように、alt属性やlabel要素など、標準の方法で行うラベリングであれば、基本的に副作用はありません。
しかし、aria-labelによるラベリングの場合、そうとは言い切れなくなります。

以下は、前節のi要素で作ったアイコンをaタグで囲い、このARIA-Barriersのトップページへ遷移できるようにした例です。

マウスでクリック・・・
NVDA・・・


このように、aria-labelでのラベリングは、「子要素全体を上書き」します。
そのため、今回のように操作可能な要素の親要素にaria-labelを設定すると、肝心の操作ができなくなってしまいます。

なお、この問題は開発者がaria-labelの効果を正確に認識していれば、避けることができます。
以下は、同じアイコンを表示しているiタグをspan要素で囲ってaria-labelを設定し、そのspanタグの親要素としてaタグを使用した例です。
こちらであれば、NVDAは・・・


## まとめ

スクリーンリーダー利用者への対応として、ラベリングはとても重要なことです。
標準の仕組みでのラベリングが難しい場合に使える手段としてのaria-labelを必要とするケースが一定数存在することは間違いありません。

しかし、aria-labelは各HTML要素が用意した標準の方法でのラベリングとは大きく異なり、使い方を誤ると副作用を生じることがあります。
やむを得ずaria-labelを使用するのであれば、これらを熟知して適切に実装し、キーボードでの操作やスクリーンリーダーでの読み上げを入念にテストする必要があります。
ariaの知識、それなりの実装時間、ブラウザやスクリーンリーダーを複数組み合わせたテスト環境など、ある程度のリソースも必要とします。
もしこれらが十分でないのならば、aria-labelを使用せず、標準の手段でラベリングができる要素の組み合わせでページを作成できないかを先に検討すべきです。
アイコンフォントは便利かもしれませんが、同等の表示となるよう画像を用意してimgタグで表示することもできるはずです。

理解・時間・テストが不足したARIAの使用は有害であり、それを修正するために考慮すべき点が多数に上ることをこの記事から感じていただき、
標準のHTMLタグを用いた実装にこだわるという決意をしていただける方が一人でも増えることを願っています。
